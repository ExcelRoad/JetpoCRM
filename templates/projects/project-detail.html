{% extends 'base/base_layout.html' %}
{% load static %}
{% load humanize %}

{% block breadcrumbs %}
    <a href="{% url 'homePage' %}">בית</a>
    <a href="{% url 'project-list' %}">פרויקטים</a>
    <p class="flex items-center gap-1">
        <svg class="size-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 14L9 19L20 8M6 8.88889L9.07692 12L16 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
       {{ project.name }}
    </p>
{% endblock breadcrumbs %}

{% block content %}
<div class="flex h-211.5"  
x-data="{modelBackgroundShow : false , singleDeleteModelShow : false, selectedProject : 0, selectedProjectName : '', projectDeleteModelShow : false, selectedTaskName : '', taskDeleteModelShow : false ,selectedtesk : 0, taskModelShow : false, taskModelTitle : '', selectedTask : 0, selectedTaskTitle : '', selectedTaskDescription: '', selectedTaskUrgency : 'low', timesheetModelShow : false, selectedTimesheet: 0, selectedTimesheetDate: '', selectedTimesheetDescription: '', selectedTimesheetHours : 0, taskDeleteModelShow : false, timesheetDeleteModelShow: false, selectedTimesheetName: '', selectedBudget : 0, selectedBudgetName : '', budgetDeleteModelShow: false, budgetModelShow: false, budgetModelTitle: '', selectedBudgetQty : 0, selectedBudgetPrice: 0}">
    <!-- Main Section -->
    <div class="w-3/4 h-full" x-data="setSection()" x-init="init()">
        <div class="border-b border-gray-200">
            <div class="px-4 py-6 w-full flex items-center justify-between ">
                <div class="">
                    <div class="flex items-center gap-4">
                        <div>
                            <h1 class="font-semibold text-3xl mb-1">{{ project.name }}</h1>
                        </div>
                        <span class="status-pill {% if project.status == 'open' %}info{% elif project.status == 'canceled' %}danger{% elif project.status == 'completed' %}success{% elif project.status == 'onHold' %}alert{% endif %}">{{ project.get_status_display }}</span>             
                    </div>
                    <div class="flex items-center gap-2">
                        <a class="btn-ghost w-fit" href="{% url 'customer-detail' project.customer.id %}">
                            <img src="{% if project.customer.logo %}{{ project.customer.logo.url }}{% else %}{% static 'images/default-avater.png' %}{% endif %}" alt="Customer Logo" class="h-6 w-6 squircle">
                            {{ project.customer.name }}
                        </a>
                    </div>
                </div>
                <div class="flex items-center gap-2" x-data="{moreActions : false}">
                    <a class="btn-main" href="#">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 14L9 19L20 8M6 8.88889L9.07692 12L16 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p>השלם פרויקט</p>
                    </a>
                    <div class="btn-action relative" @click="moreActions = !moreActions" @click.outside="moreActions = false">
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m8 10 4 4 4-4"/>
                        </svg>
                        <p>פעולות נוספות</p>
                        <div class="p-2 flex flex-col z-50 absolute top-10 border border-gray-200 shadow rounded-lg right-0 w-54 bg-white" x-show="moreActions">
                            <a class="nav-btn" href="{% url 'project-edit' project.id 'project-detail' %}">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M11 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40974 4.40973 4.7157 4.21799 5.09202C4 5.51985 4 6.0799 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.0799 20 7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V12.5M15.5 5.5L18.3284 8.32843M10.7627 10.2373L17.411 3.58902C18.192 2.80797 19.4584 2.80797 20.2394 3.58902C21.0205 4.37007 21.0205 5.6364 20.2394 6.41745L13.3774 13.2794C12.6158 14.0411 12.235 14.4219 11.8012 14.7247C11.4162 14.9936 11.0009 15.2162 10.564 15.3882C10.0717 15.582 9.54378 15.6885 8.48793 15.9016L8 16L8.04745 15.6678C8.21536 14.4925 8.29932 13.9048 8.49029 13.3561C8.65975 12.8692 8.89125 12.4063 9.17906 11.9786C9.50341 11.4966 9.92319 11.0768 10.7627 10.2373Z"
                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                               עריכה
                            </a>
                            <button class="nav-btn" @click="selectTab = 'notes'; document.getElementById('noteField').select">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 12H15M12 9V15M21.0039 12C21.0039 16.9706 16.9745 21 12.0039 21C9.9675 21 3.00463 21 3.00463 21C3.00463 21 4.56382 17.2561 3.93982 16.0008C3.34076 14.7956 3.00391 13.4372 3.00391 12C3.00391 7.02944 7.03334 3 12.0039 3C16.9745 3 21.0039 7.02944 21.0039 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                 יצירת הערה
                            </button>
                            <button class="nav-btn" @click="budgetModelShow = true, modelBackgroundShow = true, budgetModelTitle = 'יצירת תקציב' ">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M18 8.5V8.35417C18 6.50171 16.4983 5 14.6458 5H9.5C7.567 5 6 6.567 6 8.5C6 10.433 7.567 12 9.5 12H14.5C16.433 12 18 13.567 18 15.5C18 17.433 16.433 19 14.5 19H9.42708C7.53436 19 6 17.4656 6 15.5729V15.5M12 3V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                יצירת תקציב
                            </button>
                            <button class="nav-btn">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 4L12 12M20 4V8.5M20 4H15.5M19 12.5V16.8C19 17.9201 19 18.4802 18.782 18.908C18.5903 19.2843 18.2843 19.5903 17.908 19.782C17.4802 20 16.9201 20 15.8 20H7.2C6.0799 20 5.51984 20 5.09202 19.782C4.71569 19.5903 4.40973 19.2843 4.21799 18.908C4 18.4802 4 17.9201 4 16.8V8.2C4 7.0799 4 6.51984 4.21799 6.09202C4.40973 5.71569 4.71569 5.40973 5.09202 5.21799C5.51984 5 6.07989 5 7.2 5H11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                ייצוא
                            </button>
                            <hr class="text-gray-200 my-1">
                            <button class="nav-btn danger" @click="modelBackgroundShow = true, singleDeleteModelShow = true, selectedProject = '{{project.id}}', selectedProjectName = '{{project.name}}'">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                 מחיקה
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <div class="px-4 my-2 w-1/2">
                    <h3 class="font-semibold mb-1">הערה אחרונה</h3>
                    {% if project.notes.all %}
                    <div class="bg-yellow-200/20 p-2 rounded-lg border border-yellow-200/40 flex items-center gap-2">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="size-6">
                            <path d="M8 11H8.01M12 11H12.01M16 11H16.01M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p class="truncate">{% if tagged_note %}{{ tagged_note.text }}{% else %}{{ project.notes.first.text }}{% endif %}</p>
                    </div>
                    {% else %}
                    <div class="text-gray-500 p-2 rounded-lg">לא קיימות הערות עבור פרויקט זה...</div>
                    {% endif %}
                </div>
                <div class="w-1/2 flex items-center px-4 my-2">
                    {% if project.service.budget_type == 'fix' %}
                    <div class="rounded-lg p-2">
                        <p class="text-gray-500">תקציב</p>
                        <p class="text-2xl font-semibold"><span class="mx-1 text-base font-medium">₪</span>{{ project.budget.amount|floatformat:"2"|intcomma:False }}</p>
                    </div>
                    {% else %}
                    <div class="flex-1">
                        <div class="flex items-end">
                            <div class="rounded-lg p-2">
                                <p class="text-gray-500">תקציב</p>
                                <p class="text-2xl font-semibold">{{ project.budget.hours }}<span class="mx-1 text-xs font-medium">שעות</span></p>
                            </div>
                            <div class="rounded-lg p-2 align-bottom">
                                <p class="text-gray-500">ניצול</p>
                                <p class="text-base">{{ project.usage }}<span class="mx-1 text-xs">שעות</span></p>
                            </div>
                            <div class="rounded-lg p-2">
                                <p class="text-gray-500">שארית</p>
                                <p class="text-base">{{ project.budget_remaining.amount }}<span class="mx-1 text-xs">שעות</span></p>
                            </div>
                        </div>
                        <div class="flex items-center flex gap-1 w-5/8">
                            <span class="status-pill">{{ project.budget_remaining.percent }}%</span>
                            <progress class="w-full progress-bar {% if project.budget_remaining.percent < 20 %}danger{% elif project.budget_remaining.percent < 50 %}alert{% elif project.budget_remaining.percent < 80 %}process{% elif project.budget_remaining.percent < 100 %}info{% else %}success{% endif %}" max="100" value="{{ project.budget_remaining.percent }}"></progress>
                        </div>
                    </div>
                    
                    {% endif %}
                </div>
            </div>
            <div class="flex items-center justify-start mt-4 px-4">
                <button :class="selectTab=='activities' ? 'btn-tab active' : 'btn-tab' " @click="selectTab='activities'">פעילויות</button>
                <button :class="selectTab=='notes' ? 'btn-tab active' : 'btn-tab' " @click="selectTab='notes'">הערות</button>
                <button :class="selectTab=='tasks' ? 'btn-tab active' : 'btn-tab' " @click="selectTab='tasks'">משימות</button>
                <button :class="selectTab=='timesheets' ? 'btn-tab active' : 'btn-tab' " @click="selectTab='timesheets'">דיווחי שעות</button>
                <button :class="selectTab=='budgets' ? 'btn-tab active' : 'btn-tab' " @click="selectTab='budgets'">תקציב</button>
                <button :class="selectTab=='payments' ? 'btn-tab active' : 'btn-tab' " @click="selectTab='payments'">תשלומים</button>
            </div>
        </div>
        <!-- Tab Content Section -->
        <div class="py-2 w-full">
            <!-- Activities Tab Content -->
            <div x-show="selectTab == 'activities'">
                <p>פעילויות</p>
            </div>
            <!-- Notes Tab Content -->
            <div x-show="selectTab == 'notes'" class="w-full">
                <div class="border-b border-gray-200 flex items-center px-4 gap-4">
                    <div class="pb-4 w-2/4">
                        <h2 class="text-xl font-semibold mb-2">הערות</h2>
                        <form 
                              method="post" class="flex items-center gap-2" action="{% url 'project-submit-note' project.id %}">
                            {% csrf_token %}
                            <input class="input-field" name="note" required id="noteField" maxlength="200">
                            <button class="btn-main" type="submit">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10.3009 13.6949L20.102 3.89742M10.5795 14.1355L12.8019 18.5804C13.339 19.6545 13.6075 20.1916 13.9458 20.3356C14.2394 20.4606 14.575 20.4379 14.8492 20.2747C15.1651 20.0866 15.3591 19.5183 15.7472 18.3818L19.9463 6.08434C20.2845 5.09409 20.4535 4.59896 20.3378 4.27142C20.2371 3.98648 20.013 3.76234 19.7281 3.66167C19.4005 3.54595 18.9054 3.71502 17.9151 4.05315L5.61763 8.2523C4.48114 8.64037 3.91289 8.83441 3.72478 9.15032C3.56153 9.42447 3.53891 9.76007 3.66389 10.0536C3.80791 10.3919 4.34498 10.6605 5.41912 11.1975L9.86397 13.42C10.041 13.5085 10.1295 13.5527 10.2061 13.6118C10.2742 13.6643 10.3352 13.7253 10.3876 13.7933C10.4468 13.87 10.491 13.9585 10.5795 14.1355Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </form>
                        <p class="text-xs text-gray-500">השאר הערה עבור הפרויקט</p>
                    </div>
                    {% if tagged_note %}
                    <div class="flex items-center w-2/4 pb-4 h-full">
                        <div class="p-4 bg-indigo-200/30 border border-indigo-100 rounded-lg flex gap-4 items-center w-full">
                            <div class="p-2 rounded-lg bg-indigo-200/60">
                                <svg class="size-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7.99927 3V8.5C6.17801 9.86834 5 12.0466 5 14.5V15H12H19V14.5C19 12.0466 17.822 9.86834 16.0007 8.5V3M6 3H18M12 10V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <p class="truncate w-9/10">{{tagged_note.text}}</p>
                        </div>
                    </div>
                    {% endif %}
                </div>
                <div class="overflow-y-auto py-2 px-8 h-118.5 flex-col gap-2 flex w-full">
                    <div id="notes-wrapper">
                    {% if project.notes.all %}
                    {% for note in project.notes.all %}
                    <div class="p-2 flex items-center w-5/6" x-data="{showNoteMore : false}">
                        <div class="flex items-start gap-2 w-full">
                            <div class="[&>svg]:size-4 p-1 rounded hover:bg-gray-100 cursor-pointer relative" @click="showNoteMore = !showNoteMore" @click.outside="showNoteMore = false">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M18 12H18.01M12 12H12.01M6 12H6.01M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12ZM19 12C19 12.5523 18.5523 13 18 13C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11C18.5523 11 19 11.4477 19 12ZM7 12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12C5 11.4477 5.44772 11 6 11C6.55228 11 7 11.4477 7 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <div x-show="showNoteMore"
                                    class="p-2 flex flex-col z-100 absolute top-6 border border-gray-200 shadow rounded-lg right-2 w-44 bg-white">
                                    {% if note.tagged %}
                                    <a class="nav-btn" href="{% url 'project-tag-note' note.id %}">
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.99927 3V8.5C6.17801 9.86834 5 12.0466 5 14.5V15H12H19V14.5C19 12.0466 17.822 9.86834 16.0007 8.5V3M6 3H18M12 10V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                         הורד נעיצה
                                    </a>
                                    {% else %}
                                    <a class="nav-btn" href="{% url 'project-tag-note' note.id %}">
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.99927 3V8.5C6.17801 9.86834 5 12.0466 5 14.5V15H12H19V14.5C19 12.0466 17.822 9.86834 16.0007 8.5V3M6 3H18M12 10V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                         נעיצה
                                    </a>
                                    {% endif %}
                                    <hr class="text-gray-200 my-1">
                                    <a class="nav-btn danger" href="{% url 'project-delete-note' note.id %}">
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                         מחיקה
                                    </a>
                                </div>
                            </div>
                            <div class="icon-note">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 11H8.01M12 11H12.01M16 11H16.01M21 20L17.6757 18.3378C17.4237 18.2118 17.2977 18.1488 17.1656 18.1044C17.0484 18.065 16.9277 18.0365 16.8052 18.0193C16.6672 18 16.5263 18 16.2446 18H6.2C5.07989 18 4.51984 18 4.09202 17.782C3.71569 17.5903 3.40973 17.2843 3.21799 16.908C3 16.4802 3 15.9201 3 14.8V7.2C3 6.07989 3 5.51984 3.21799 5.09202C3.40973 4.71569 3.71569 4.40973 4.09202 4.21799C4.51984 4 5.0799 4 6.2 4H17.8C18.9201 4 19.4802 4 19.908 4.21799C20.2843 4.40973 20.5903 4.71569 20.782 5.09202C21 5.51984 21 6.0799 21 7.2V20Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="flex flex-col gap-2 relative w-full" x-data="{fold : true, showFold : document.getElementById('noteText-{{note.id}}').textContent.length > 168}">
                                <article :class="fold ? '' : 'text-wrap' " class="flex flex-col gap-1 w-9/10 transition-all duration-100">
                                    <p :class="fold ? 'truncate' : 'wrap-break-word' " class="transition-all duration-100" id="noteText-{{note.id}}" x-transition>{{ note.text }}</p>
                                    <span class="text-gray-600 text-xs">{{ note.created_at }}</span>
                                </article>
                                <span class="absolute top-0 -left-20 hover:bg-gray-100 rounded-lg cursor-pointer" @click="fold = !fold" x-show="showFold">
                                    <svg :class="fold ? 'size-5 transition duration-100' : 'size-5 rotate-180 transition duration-100' " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m8 10 4 4 4-4"/>
                                    </svg>
                                </span>
                            </div>
                            
                        </div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="border-dashed border-2 border-gray-200 flex flex-col items-center justify-center rounded-xl p-6 gap-4 text-center">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-400 size-24">
                            <path d="M21 20L20.5528 20.8944C20.8628 21.0494 21.2309 21.0329 21.5257 20.8507C21.8205 20.6684 22 20.3466 22 20H21ZM16.8052 18.0193L16.9438 17.029L16.8052 18.0193ZM17.6757 18.3378L17.2285 19.2323L17.6757 18.3378ZM17.1656 18.1044L16.8467 19.0522L17.1656 18.1044ZM3.21799 16.908L4.10899 16.454L3.21799 16.908ZM4.09202 17.782L4.54601 16.891L4.09202 17.782ZM19.908 4.21799L19.454 5.10899L19.908 4.21799ZM20.782 5.09202L19.891 5.54601L20.782 5.09202ZM4.09202 4.21799L4.54601 5.10899L4.09202 4.21799ZM3.21799 5.09202L4.10899 5.54601L3.21799 5.09202ZM11.2602 11.0429C10.8697 11.4334 10.8697 12.0666 11.2602 12.4571C11.6507 12.8476 12.2839 12.8476 12.6744 12.4571L11.2602 11.0429ZM9.06184 8.50074C8.92417 9.03559 9.24616 9.58078 9.78101 9.71844C10.3159 9.8561 10.861 9.53411 10.9987 8.99926L9.06184 8.50074ZM11.9668 13.75C11.4145 13.75 10.9668 14.1977 10.9668 14.75C10.9668 15.3023 11.4145 15.75 11.9668 15.75V13.75ZM11.9768 15.75C12.5291 15.75 12.9768 15.3023 12.9768 14.75C12.9768 14.1977 12.5291 13.75 11.9768 13.75V15.75ZM6.2 5H17.8V3H6.2V5ZM4 14.8V7.2H2V14.8H4ZM16.2446 17H6.2V19H16.2446V17ZM21.4472 19.1056L18.1229 17.4434L17.2285 19.2323L20.5528 20.8944L21.4472 19.1056ZM16.2446 19C16.553 19 16.6133 19.0022 16.6665 19.0097L16.9438 17.029C16.7211 16.9978 16.4996 17 16.2446 17V19ZM18.1229 17.4434C17.8948 17.3294 17.6977 17.2283 17.4845 17.1566L16.8467 19.0522C16.8977 19.0693 16.9526 19.0943 17.2285 19.2323L18.1229 17.4434ZM16.6665 19.0097C16.7278 19.0182 16.7881 19.0325 16.8467 19.0522L17.4845 17.1566C17.3086 17.0974 17.1276 17.0547 16.9438 17.029L16.6665 19.0097ZM2 14.8C2 15.3436 1.99922 15.8114 2.03057 16.195C2.06287 16.5904 2.13419 16.9836 2.32698 17.362L4.10899 16.454C4.0838 16.4045 4.04612 16.3038 4.02393 16.0322C4.00078 15.7488 4 15.3766 4 14.8H2ZM6.2 17C5.62345 17 5.25117 16.9992 4.96784 16.9761C4.69617 16.9539 4.59545 16.9162 4.54601 16.891L3.63803 18.673C4.01641 18.8658 4.40963 18.9371 4.80497 18.9694C5.18864 19.0008 5.65645 19 6.2 19V17ZM2.32698 17.362C2.6146 17.9265 3.07354 18.3854 3.63803 18.673L4.54601 16.891C4.35785 16.7951 4.20487 16.6422 4.10899 16.454L2.32698 17.362ZM17.8 5C18.3766 5 18.7488 5.00078 19.0322 5.02393C19.3038 5.04612 19.4045 5.0838 19.454 5.10899L20.362 3.32698C19.9836 3.13419 19.5904 3.06287 19.195 3.03057C18.8114 2.99922 18.3436 3 17.8 3V5ZM22 7.2C22 6.65645 22.0008 6.18864 21.9694 5.80497C21.9371 5.40963 21.8658 5.01641 21.673 4.63803L19.891 5.54601C19.9162 5.59545 19.9539 5.69617 19.9761 5.96784C19.9992 6.25117 20 6.62345 20 7.2H22ZM19.454 5.10899C19.6422 5.20487 19.7951 5.35785 19.891 5.54601L21.673 4.63803C21.3854 4.07354 20.9265 3.6146 20.362 3.32698L19.454 5.10899ZM6.2 3C5.65645 3 5.18864 2.99922 4.80497 3.03057C4.40963 3.06287 4.01641 3.13419 3.63803 3.32698L4.54601 5.10899C4.59545 5.0838 4.69617 5.04612 4.96784 5.02393C5.25117 5.00078 5.62345 5 6.2 5V3ZM4 7.2C4 6.62345 4.00078 6.25117 4.02393 5.96784C4.04612 5.69617 4.0838 5.59545 4.10899 5.54601L2.32698 4.63803C2.13419 5.01641 2.06287 5.40963 2.03057 5.80497C1.99922 6.18864 2 6.65645 2 7.2H4ZM3.63803 3.32698C3.07354 3.6146 2.6146 4.07354 2.32698 4.63803L4.10899 5.54601C4.20487 5.35785 4.35785 5.20487 4.54601 5.10899L3.63803 3.32698ZM12.9673 9.25C12.9673 9.42317 12.9218 9.55527 12.6478 9.81968C12.4941 9.96803 12.3131 10.1153 12.0622 10.324C11.8238 10.5223 11.5443 10.7587 11.2602 11.0429L12.6744 12.4571C12.8902 12.2413 13.1107 12.0533 13.3412 11.8616C13.5589 11.6805 13.8154 11.4723 14.0367 11.2587C14.5128 10.7993 14.9673 10.1814 14.9673 9.25H12.9673ZM11.9673 8.25C12.5195 8.25 12.9673 8.69772 12.9673 9.25H14.9673C14.9673 7.59315 13.6241 6.25 11.9673 6.25V8.25ZM10.9987 8.99926C11.1098 8.56774 11.5027 8.25 11.9673 8.25V6.25C10.568 6.25 9.39481 7.20704 9.06184 8.50074L10.9987 8.99926ZM11.9668 15.75H11.9768V13.75H11.9668V15.75ZM20 7.2V20H22V7.2H20Z" fill="currentColor"/>
                        </svg>
                        <div class="flex flex-col gap-2">
                            <h3 class="text-xl font-semibold">לא קיימות הערות עבור הפרויקט הזה עדיין</h3>
                            <p class="text-gray-400">הוסף הערה חדשה עכשיו<br>תוכל לראות את ההערה האחרונה בראש הדף</p>
                        </div>
                    </div>
                    {% endif %}
                    </div>
                </div>
            </div>
            <!-- Tasks Tab Content -->
            <div x-show="selectTab == 'tasks'" x-data="{showStatus : 'open'}">
                <div class="border-b border-gray-200 flex items-center justify-between px-4 gap-4">
                    <div class="w-2/4 flex items-center gap-10">
                        <h2 class="pb-4 text-xl font-semibold my-2">משימות</h2>
                        <div class="flex gap-1 items-end">
                            <button class="btn-tab" @click="showStatus = 'all'" :class="showStatus == 'all' ? 'active' : '' ">כל המשימות</button>
                            <button class="btn-tab" @click="showStatus = 'open'" :class="showStatus == 'open' ? 'active' : '' ">פתוחות</button>
                            <button class="btn-tab" @click="showStatus = 'complete'" :class="showStatus == 'complete' ? 'active' : '' ">הושלמו</button>
                        </div>
                    </div>
                    <div>
                        <button class="btn-main" @click="taskModelShow = true, modelBackgroundShow = true, taskModelTitle='יצירת משימה'">
                            משימה חדשה
                        </button>
                    </div>
                </div>
                <div class="overflow-y-auto h-118.5 flex-col flex w-full">
                    {% if project.tasks.all %}
                    <div class="table-wrapper mx-4">
                        <table class="w-full relative">
                            <thead class="h-full">
                                <tr class="table-header-row">
                                    <th class="table-header-item w-10"></th>
                                    <th class="table-header-item w-10"></th>
                                    <th class="table-header-item">שם</th>
                                    <th class="table-header-item">תיאור</th>
                                    <th class="table-header-item">סטטוס</th>
                                    <th class="table-header-item">שעות מדווחות</th>
                                    <th class="table-header-item">חיוב</th>
                                    <th class="table-header-item"></th>
                                </tr>
                            </thead>
                            <tbody class="">
                                {% for task in project.tasks.all %}
                                <tr class="table-body-item" x-show="(showStatus == 'open' && '{{task.is_completed}}'.toLowerCase() == 'false') || showStatus == 'all' || (showStatus == 'complete' && '{{task.is_completed}}'.toLowerCase() == 'true')">
                                    <td class="">
                                        <span class="status-pill {% if task.urgency == 'low' %}success{% elif task.urgency == 'medium' %}alert{% elif task.urgency == 'high' %}danger{% elif task.urgency == 'critical' %}proccess{% endif %}">•</span>
                                    </td>
                                    <td>
                                        {% if not task.is_completed %}
                                        <form method="post" action="{% url 'task-complete' task.id %}">
                                            {% csrf_token %}
                                            <button type="submit" class="w-fit text-emerald-600 bg-emerald-50 px-1 py-0.5 rounded-lg hover:bg-emerald-100 cursor-pointer">✓</button>
                                        </form>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <p class="font-semibold">{{task.title}}</p>
                                    </td>
                                    <td>{{ task.description }}</td>
                                    <td>
                                        <span class="status-pill {% if task.is_completed %}success{% else %}proccess{% endif %}">{% if task.is_completed == True %}הושלמה{% else %}פתוחה{% endif %}</span>
                                    </td>
                                    <td>{{ task.reported_timesheet }}</td>
                                    <td>{{ task.billed_timesheet }}</td>
                                    <td x-data="{ modeOptions : false}">
                                        <div class="size-6 p-1 rounded hover:bg-gray-200 cursor-pointer relative" @click="modeOptions = !modeOptions" @click.outside="modeOptions = false">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M18 12H18.01M12 12H12.01M6 12H6.01M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12ZM19 12C19 12.5523 18.5523 13 18 13C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11C18.5523 11 19 11.4477 19 12ZM7 12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12C5 11.4477 5.44772 11 6 11C6.55228 11 7 11.4477 7 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <div class="p-2 flex flex-col z-100 absolute top-7 border border-gray-200 shadow rounded-lg -right-36 w-44 bg-white" x-show="modeOptions">
                                                <button class="nav-btn" @click="modelBackgroundShow = true, taskModelShow = true, taskModelTitle = 'עריכת משימה', selectedTaskTitle = '{{task.title}}', selectedTaskDescription = '{{task.description}}', selectedTask = '{{task.id}}', selectedTaskUrgency = '{{ task.urgency }}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M11 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40974 4.40973 4.7157 4.21799 5.09202C4 5.51985 4 6.0799 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.0799 20 7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V12.5M15.5 5.5L18.3284 8.32843M10.7627 10.2373L17.411 3.58902C18.192 2.80797 19.4584 2.80797 20.2394 3.58902C21.0205 4.37007 21.0205 5.6364 20.2394 6.41745L13.3774 13.2794C12.6158 14.0411 12.235 14.4219 11.8012 14.7247C11.4162 14.9936 11.0009 15.2162 10.564 15.3882C10.0717 15.582 9.54378 15.6885 8.48793 15.9016L8 16L8.04745 15.6678C8.21536 14.4925 8.29932 13.9048 8.49029 13.3561C8.65975 12.8692 8.89125 12.4063 9.17906 11.9786C9.50341 11.4966 9.92319 11.0768 10.7627 10.2373Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    עריכה
                                                </button>
                                                <button class="nav-btn" @click="modelBackgroundShow = true, timesheetModelShow = true, selectedTask = '{{task.id}}', selectedTimesheet = 0, selectedTimesheetDate = '', selectedTimesheetDescription = '', selectedTimesheetHours = 0">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M12 16.5V8.5M16 12.5L8 12.5008M3 5.5L5 3.5M21 5.5L19 3.5M20 12.5C20 16.9183 16.4183 20.5 12 20.5C7.58172 20.5 4 16.9183 4 12.5C4 8.08172 7.58172 4.5 12 4.5C16.4183 4.5 20 8.08172 20 12.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    הוספת דיווח שעות
                                                </button>
                                                <hr class="text-gray-200 my-1">
                                                <button class="nav-btn danger" @click="modelBackgroundShow = true, taskDeleteModelShow = true, selectedTask = '{{task.id}}', selectedTaskName = '{{task.title}}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    מחיקה
                                                </button>
                                            </div>
                                        </div> 
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="border-dashed border-2 border-gray-200 flex flex-col items-center justify-center rounded-xl p-6 gap-4 text-center mt-2 mx-4">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-400 size-24">
                                    <path d="M21 20L20.5528 20.8944C20.8628 21.0494 21.2309 21.0329 21.5257 20.8507C21.8205 20.6684 22 20.3466 22 20H21ZM16.8052 18.0193L16.9438 17.029L16.8052 18.0193ZM17.6757 18.3378L17.2285 19.2323L17.6757 18.3378ZM17.1656 18.1044L16.8467 19.0522L17.1656 18.1044ZM3.21799 16.908L4.10899 16.454L3.21799 16.908ZM4.09202 17.782L4.54601 16.891L4.09202 17.782ZM19.908 4.21799L19.454 5.10899L19.908 4.21799ZM20.782 5.09202L19.891 5.54601L20.782 5.09202ZM4.09202 4.21799L4.54601 5.10899L4.09202 4.21799ZM3.21799 5.09202L4.10899 5.54601L3.21799 5.09202ZM11.2602 11.0429C10.8697 11.4334 10.8697 12.0666 11.2602 12.4571C11.6507 12.8476 12.2839 12.8476 12.6744 12.4571L11.2602 11.0429ZM9.06184 8.50074C8.92417 9.03559 9.24616 9.58078 9.78101 9.71844C10.3159 9.8561 10.861 9.53411 10.9987 8.99926L9.06184 8.50074ZM11.9668 13.75C11.4145 13.75 10.9668 14.1977 10.9668 14.75C10.9668 15.3023 11.4145 15.75 11.9668 15.75V13.75ZM11.9768 15.75C12.5291 15.75 12.9768 15.3023 12.9768 14.75C12.9768 14.1977 12.5291 13.75 11.9768 13.75V15.75ZM6.2 5H17.8V3H6.2V5ZM4 14.8V7.2H2V14.8H4ZM16.2446 17H6.2V19H16.2446V17ZM21.4472 19.1056L18.1229 17.4434L17.2285 19.2323L20.5528 20.8944L21.4472 19.1056ZM16.2446 19C16.553 19 16.6133 19.0022 16.6665 19.0097L16.9438 17.029C16.7211 16.9978 16.4996 17 16.2446 17V19ZM18.1229 17.4434C17.8948 17.3294 17.6977 17.2283 17.4845 17.1566L16.8467 19.0522C16.8977 19.0693 16.9526 19.0943 17.2285 19.2323L18.1229 17.4434ZM16.6665 19.0097C16.7278 19.0182 16.7881 19.0325 16.8467 19.0522L17.4845 17.1566C17.3086 17.0974 17.1276 17.0547 16.9438 17.029L16.6665 19.0097ZM2 14.8C2 15.3436 1.99922 15.8114 2.03057 16.195C2.06287 16.5904 2.13419 16.9836 2.32698 17.362L4.10899 16.454C4.0838 16.4045 4.04612 16.3038 4.02393 16.0322C4.00078 15.7488 4 15.3766 4 14.8H2ZM6.2 17C5.62345 17 5.25117 16.9992 4.96784 16.9761C4.69617 16.9539 4.59545 16.9162 4.54601 16.891L3.63803 18.673C4.01641 18.8658 4.40963 18.9371 4.80497 18.9694C5.18864 19.0008 5.65645 19 6.2 19V17ZM2.32698 17.362C2.6146 17.9265 3.07354 18.3854 3.63803 18.673L4.54601 16.891C4.35785 16.7951 4.20487 16.6422 4.10899 16.454L2.32698 17.362ZM17.8 5C18.3766 5 18.7488 5.00078 19.0322 5.02393C19.3038 5.04612 19.4045 5.0838 19.454 5.10899L20.362 3.32698C19.9836 3.13419 19.5904 3.06287 19.195 3.03057C18.8114 2.99922 18.3436 3 17.8 3V5ZM22 7.2C22 6.65645 22.0008 6.18864 21.9694 5.80497C21.9371 5.40963 21.8658 5.01641 21.673 4.63803L19.891 5.54601C19.9162 5.59545 19.9539 5.69617 19.9761 5.96784C19.9992 6.25117 20 6.62345 20 7.2H22ZM19.454 5.10899C19.6422 5.20487 19.7951 5.35785 19.891 5.54601L21.673 4.63803C21.3854 4.07354 20.9265 3.6146 20.362 3.32698L19.454 5.10899ZM6.2 3C5.65645 3 5.18864 2.99922 4.80497 3.03057C4.40963 3.06287 4.01641 3.13419 3.63803 3.32698L4.54601 5.10899C4.59545 5.0838 4.69617 5.04612 4.96784 5.02393C5.25117 5.00078 5.62345 5 6.2 5V3ZM4 7.2C4 6.62345 4.00078 6.25117 4.02393 5.96784C4.04612 5.69617 4.0838 5.59545 4.10899 5.54601L2.32698 4.63803C2.13419 5.01641 2.06287 5.40963 2.03057 5.80497C1.99922 6.18864 2 6.65645 2 7.2H4ZM3.63803 3.32698C3.07354 3.6146 2.6146 4.07354 2.32698 4.63803L4.10899 5.54601C4.20487 5.35785 4.35785 5.20487 4.54601 5.10899L3.63803 3.32698ZM12.9673 9.25C12.9673 9.42317 12.9218 9.55527 12.6478 9.81968C12.4941 9.96803 12.3131 10.1153 12.0622 10.324C11.8238 10.5223 11.5443 10.7587 11.2602 11.0429L12.6744 12.4571C12.8902 12.2413 13.1107 12.0533 13.3412 11.8616C13.5589 11.6805 13.8154 11.4723 14.0367 11.2587C14.5128 10.7993 14.9673 10.1814 14.9673 9.25H12.9673ZM11.9673 8.25C12.5195 8.25 12.9673 8.69772 12.9673 9.25H14.9673C14.9673 7.59315 13.6241 6.25 11.9673 6.25V8.25ZM10.9987 8.99926C11.1098 8.56774 11.5027 8.25 11.9673 8.25V6.25C10.568 6.25 9.39481 7.20704 9.06184 8.50074L10.9987 8.99926ZM11.9668 15.75H11.9768V13.75H11.9668V15.75ZM20 7.2V20H22V7.2H20Z" fill="currentColor"/>
                                </svg>
                                <div class="flex flex-col gap-2">
                                    <h3 class="text-xl font-semibold">לא קיימות משימות עבור הפרויקט הזה עדיין</h3>
                                </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            <!-- Timesheets Tab Content -->
            <div x-show="selectTab == 'timesheets'">
                <div class="border-b border-gray-200 flex items-center justify-between px-4 gap-4">
                    <div class="pb-4 w-2/4">
                        <h2 class="text-xl font-semibold my-2">דיווחי שעות</h2>
                    </div>
                    <div>
                    </div>
                </div>
                <div class="overflow-y-auto h-118.5 flex-col flex w-full">
                    {% if project.timesheets %}
                    <div class="table-wrapper mx-4">
                        <table class="w-full relative">
                            <thead class="h-full">
                                <tr class="table-header-row">
                                    <th class="table-header-item">תאריך</th>
                                    <th class="table-header-item">משימה</th>
                                    <th class="table-header-item">תיאור</th>
                                    <th class="table-header-item">שעות מדווחות</th>
                                    <th class="table-header-item">חיוב</th>
                                    <th class="table-header-item"></th>
                                </tr>
                            </thead>
                            <tbody class="">
                                {% for timesheet in project.timesheets %}
                                <tr class="table-body-item">
                                    <td>
                                        <p class="font-semibold">{{timesheet.date|date:'d/m/Y'}}</p>
                                    </td>
                                    <td>{{ timesheet.task.title }}</td>
                                    <td>
                                        {{ timesheet.description }}
                                    </td>
                                    <td>{{ timesheet.hours }}</td>
                                    <td>
                                        <span class="status-pill {% if timesheet.is_billed %}success{% else %}proccess{% endif %}">
                                            {% if timesheet.is_billed %}
                                            חוייב
                                            {% else %}
                                            לא חוייב
                                            {% endif %}
                                        </span>
                                    </td>
                                    <td x-data="{ modeOptions : false}">
                                        <div class="size-6 p-1 rounded hover:bg-gray-200 cursor-pointer relative" @click="modeOptions = !modeOptions" @click.outside="modeOptions = false">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M18 12H18.01M12 12H12.01M6 12H6.01M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12ZM19 12C19 12.5523 18.5523 13 18 13C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11C18.5523 11 19 11.4477 19 12ZM7 12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12C5 11.4477 5.44772 11 6 11C6.55228 11 7 11.4477 7 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <div class="p-2 flex flex-col z-100 absolute top-7 border border-gray-200 shadow rounded-lg -right-36 w-44 bg-white" x-show="modeOptions">
                                                <button class="nav-btn" @click="modelBackgroundShow = true, timesheetModelShow = true, selectedTask = '{{timesheet.task.id}}', selectedTimesheet = '{{timesheet.id}}', selectedTimesheetDate = '{{timesheet.date|date:'Y-m-d'}}', selectedTimesheetDescription = '{{timesheet.description}}', selectedTimesheetHours = '{{timesheet.hours}}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M11 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40974 4.40973 4.7157 4.21799 5.09202C4 5.51985 4 6.0799 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.0799 20 7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V12.5M15.5 5.5L18.3284 8.32843M10.7627 10.2373L17.411 3.58902C18.192 2.80797 19.4584 2.80797 20.2394 3.58902C21.0205 4.37007 21.0205 5.6364 20.2394 6.41745L13.3774 13.2794C12.6158 14.0411 12.235 14.4219 11.8012 14.7247C11.4162 14.9936 11.0009 15.2162 10.564 15.3882C10.0717 15.582 9.54378 15.6885 8.48793 15.9016L8 16L8.04745 15.6678C8.21536 14.4925 8.29932 13.9048 8.49029 13.3561C8.65975 12.8692 8.89125 12.4063 9.17906 11.9786C9.50341 11.4966 9.92319 11.0768 10.7627 10.2373Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    עריכה
                                                </button>
                                                <hr class="text-gray-200 my-1">
                                                <button class="nav-btn danger" @click="modelBackgroundShow = true, timesheetDeleteModelShow = true, selectedTimesheet = '{{timesheet.id}}', selectedTimesheetName = '{{ timesheet.hours }} שעות עבור המשימה  {{ timesheet.task.title }}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    מחיקה
                                                </button>
                                            </div>
                                        </div> 
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="border-dashed border-2 border-gray-200 flex flex-col items-center justify-center rounded-xl p-6 gap-4 text-center mt-2 mx-4">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-400 size-24">
                                    <path d="M21 20L20.5528 20.8944C20.8628 21.0494 21.2309 21.0329 21.5257 20.8507C21.8205 20.6684 22 20.3466 22 20H21ZM16.8052 18.0193L16.9438 17.029L16.8052 18.0193ZM17.6757 18.3378L17.2285 19.2323L17.6757 18.3378ZM17.1656 18.1044L16.8467 19.0522L17.1656 18.1044ZM3.21799 16.908L4.10899 16.454L3.21799 16.908ZM4.09202 17.782L4.54601 16.891L4.09202 17.782ZM19.908 4.21799L19.454 5.10899L19.908 4.21799ZM20.782 5.09202L19.891 5.54601L20.782 5.09202ZM4.09202 4.21799L4.54601 5.10899L4.09202 4.21799ZM3.21799 5.09202L4.10899 5.54601L3.21799 5.09202ZM11.2602 11.0429C10.8697 11.4334 10.8697 12.0666 11.2602 12.4571C11.6507 12.8476 12.2839 12.8476 12.6744 12.4571L11.2602 11.0429ZM9.06184 8.50074C8.92417 9.03559 9.24616 9.58078 9.78101 9.71844C10.3159 9.8561 10.861 9.53411 10.9987 8.99926L9.06184 8.50074ZM11.9668 13.75C11.4145 13.75 10.9668 14.1977 10.9668 14.75C10.9668 15.3023 11.4145 15.75 11.9668 15.75V13.75ZM11.9768 15.75C12.5291 15.75 12.9768 15.3023 12.9768 14.75C12.9768 14.1977 12.5291 13.75 11.9768 13.75V15.75ZM6.2 5H17.8V3H6.2V5ZM4 14.8V7.2H2V14.8H4ZM16.2446 17H6.2V19H16.2446V17ZM21.4472 19.1056L18.1229 17.4434L17.2285 19.2323L20.5528 20.8944L21.4472 19.1056ZM16.2446 19C16.553 19 16.6133 19.0022 16.6665 19.0097L16.9438 17.029C16.7211 16.9978 16.4996 17 16.2446 17V19ZM18.1229 17.4434C17.8948 17.3294 17.6977 17.2283 17.4845 17.1566L16.8467 19.0522C16.8977 19.0693 16.9526 19.0943 17.2285 19.2323L18.1229 17.4434ZM16.6665 19.0097C16.7278 19.0182 16.7881 19.0325 16.8467 19.0522L17.4845 17.1566C17.3086 17.0974 17.1276 17.0547 16.9438 17.029L16.6665 19.0097ZM2 14.8C2 15.3436 1.99922 15.8114 2.03057 16.195C2.06287 16.5904 2.13419 16.9836 2.32698 17.362L4.10899 16.454C4.0838 16.4045 4.04612 16.3038 4.02393 16.0322C4.00078 15.7488 4 15.3766 4 14.8H2ZM6.2 17C5.62345 17 5.25117 16.9992 4.96784 16.9761C4.69617 16.9539 4.59545 16.9162 4.54601 16.891L3.63803 18.673C4.01641 18.8658 4.40963 18.9371 4.80497 18.9694C5.18864 19.0008 5.65645 19 6.2 19V17ZM2.32698 17.362C2.6146 17.9265 3.07354 18.3854 3.63803 18.673L4.54601 16.891C4.35785 16.7951 4.20487 16.6422 4.10899 16.454L2.32698 17.362ZM17.8 5C18.3766 5 18.7488 5.00078 19.0322 5.02393C19.3038 5.04612 19.4045 5.0838 19.454 5.10899L20.362 3.32698C19.9836 3.13419 19.5904 3.06287 19.195 3.03057C18.8114 2.99922 18.3436 3 17.8 3V5ZM22 7.2C22 6.65645 22.0008 6.18864 21.9694 5.80497C21.9371 5.40963 21.8658 5.01641 21.673 4.63803L19.891 5.54601C19.9162 5.59545 19.9539 5.69617 19.9761 5.96784C19.9992 6.25117 20 6.62345 20 7.2H22ZM19.454 5.10899C19.6422 5.20487 19.7951 5.35785 19.891 5.54601L21.673 4.63803C21.3854 4.07354 20.9265 3.6146 20.362 3.32698L19.454 5.10899ZM6.2 3C5.65645 3 5.18864 2.99922 4.80497 3.03057C4.40963 3.06287 4.01641 3.13419 3.63803 3.32698L4.54601 5.10899C4.59545 5.0838 4.69617 5.04612 4.96784 5.02393C5.25117 5.00078 5.62345 5 6.2 5V3ZM4 7.2C4 6.62345 4.00078 6.25117 4.02393 5.96784C4.04612 5.69617 4.0838 5.59545 4.10899 5.54601L2.32698 4.63803C2.13419 5.01641 2.06287 5.40963 2.03057 5.80497C1.99922 6.18864 2 6.65645 2 7.2H4ZM3.63803 3.32698C3.07354 3.6146 2.6146 4.07354 2.32698 4.63803L4.10899 5.54601C4.20487 5.35785 4.35785 5.20487 4.54601 5.10899L3.63803 3.32698ZM12.9673 9.25C12.9673 9.42317 12.9218 9.55527 12.6478 9.81968C12.4941 9.96803 12.3131 10.1153 12.0622 10.324C11.8238 10.5223 11.5443 10.7587 11.2602 11.0429L12.6744 12.4571C12.8902 12.2413 13.1107 12.0533 13.3412 11.8616C13.5589 11.6805 13.8154 11.4723 14.0367 11.2587C14.5128 10.7993 14.9673 10.1814 14.9673 9.25H12.9673ZM11.9673 8.25C12.5195 8.25 12.9673 8.69772 12.9673 9.25H14.9673C14.9673 7.59315 13.6241 6.25 11.9673 6.25V8.25ZM10.9987 8.99926C11.1098 8.56774 11.5027 8.25 11.9673 8.25V6.25C10.568 6.25 9.39481 7.20704 9.06184 8.50074L10.9987 8.99926ZM11.9668 15.75H11.9768V13.75H11.9668V15.75ZM20 7.2V20H22V7.2H20Z" fill="currentColor"/>
                                </svg>
                                <div class="flex flex-col gap-2">
                                    <h3 class="text-xl font-semibold">לא קיימים דיווחי שעות עבור הפרויקט הזה עדיין</h3>
                                </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            <!-- Budget Tab Content -->
            <div x-show="selectTab == 'budgets'">
                <div class="border-b border-gray-200 flex items-center justify-between px-4 gap-4">
                    <div class="pb-4 w-2/4">
                        <h2 class="text-xl font-semibold my-2">תקציבים</h2>
                    </div>
                    <div>
                        <button class="btn-main" @click="budgetModelShow = true, modelBackgroundShow = true, budgetModelTitle = 'יצירת תקציב' ">יצירת תקציב</button>
                    </div>
                </div>
                <div class="overflow-y-auto h-118.5 flex-col flex w-full">
                    {% if project.budgets %}
                    <div class="table-wrapper mx-4">
                        <table class="w-full relative">
                            <thead class="h-full">
                                <tr class="table-header-row">
                                    <th class="table-header-item">תאריך</th>
                                    <th class="table-header-item">שם</th>
                                    <th class="table-header-item">סטטוס</th>
                                    <th class="table-header-item">כמות</th>
                                    <th class="table-header-item">מחיר</th>
                                    <th class="table-header-item">שעות מדווחות</th>
                                </tr>
                            </thead>
                            <tbody class="">
                                {% for budget in project.budgets.all %}
                                <tr class="table-body-item">
                                    <td>
                                        <p class="font-semibold">{{budget.created_at|date:'d/m/Y'}}</p>
                                    </td>
                                    <td>{{ budget.name }}</td>
                                    <td>
                                        <span class="status-pill {% if budget.is_active %}success{% else %}danger{% endif %}">{% if budget.is_active %}פעיל{% else %}לא פעיל{% endif %}</span>
                                    </td>
                                    <td>{{ budget.qty|floatformat:"2"|intcomma:False }}</td>
                                    <td>₪{{ budget.total_price|floatformat:"0"|intcomma:False }}</td>
                                    <td>{{ budget.reported_hours }}</td>
                                    <td x-data="{ modeOptions : false}">
                                        <div class="size-6 p-1 rounded hover:bg-gray-200 cursor-pointer relative" @click="modeOptions = !modeOptions" @click.outside="modeOptions = false">
                                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M18 12H18.01M12 12H12.01M6 12H6.01M13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12ZM19 12C19 12.5523 18.5523 13 18 13C17.4477 13 17 12.5523 17 12C17 11.4477 17.4477 11 18 11C18.5523 11 19 11.4477 19 12ZM7 12C7 12.5523 6.55228 13 6 13C5.44772 13 5 12.5523 5 12C5 11.4477 5.44772 11 6 11C6.55228 11 7 11.4477 7 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            <div class="p-2 flex flex-col z-100 absolute top-7 border border-gray-200 shadow rounded-lg -right-36 w-44 bg-white" x-show="modeOptions">
                                                <button class="nav-btn" @click="modelBackgroundShow = true, budgetModelShow = true, selectedBudget = '{{budget.id}}', selectedBudgetPrice = '{{budget.price}}', selectedBudgetQty = '{{budget.qty}}', budgetModelTitle = 'עריכת תקציב', selectedBudgetName = '{{budget.name}}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M11 4H7.2C6.0799 4 5.51984 4 5.09202 4.21799C4.71569 4.40974 4.40973 4.7157 4.21799 5.09202C4 5.51985 4 6.0799 4 7.2V16.8C4 17.9201 4 18.4802 4.21799 18.908C4.40973 19.2843 4.71569 19.5903 5.09202 19.782C5.51984 20 6.0799 20 7.2 20H16.8C17.9201 20 18.4802 20 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V12.5M15.5 5.5L18.3284 8.32843M10.7627 10.2373L17.411 3.58902C18.192 2.80797 19.4584 2.80797 20.2394 3.58902C21.0205 4.37007 21.0205 5.6364 20.2394 6.41745L13.3774 13.2794C12.6158 14.0411 12.235 14.4219 11.8012 14.7247C11.4162 14.9936 11.0009 15.2162 10.564 15.3882C10.0717 15.582 9.54378 15.6885 8.48793 15.9016L8 16L8.04745 15.6678C8.21536 14.4925 8.29932 13.9048 8.49029 13.3561C8.65975 12.8692 8.89125 12.4063 9.17906 11.9786C9.50341 11.4966 9.92319 11.0768 10.7627 10.2373Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                   עריכה
                                                </button>
                                                <button class="nav-btn" @click="modelBackgroundShow = true, budgetModelShow = true, selectedBudget = '{{budget.id}}', selectedBudgetPrice = '0', selectedBudgetQty = '0', budgetModelTitle = 'הוספת תקציב', selectedBudgetName='{{budget.name}}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 12H20M12 4V20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    הוספת תקציב
                                                </button>
                                                {% if not budget.is_active %}
                                                    <a class="nav-btn" href="{% url 'project-budget-activate' budget.id %}">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                        <path d="M15.0015 11.3344C15.3354 11.5569 15.5023 11.6682 15.5605 11.8085C15.6113 11.9311 15.6113 12.0689 15.5605 12.1915C15.5023 12.3318 15.3354 12.4431 15.0015 12.6656L11.2438 15.1708C10.8397 15.4402 10.6377 15.5749 10.4702 15.5649C10.3243 15.5561 10.1894 15.484 10.1012 15.3674C10 15.2336 10 14.9908 10 14.5052V9.49481C10 9.00923 10 8.76644 10.1012 8.63261C10.1894 8.51601 10.3243 8.44386 10.4702 8.43515C10.6377 8.42515 10.8397 8.55982 11.2438 8.82917L15.0015 11.3344Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                   הפעלה
                                                </a>
                                                {% endif %}
                                                <hr class="text-gray-200 my-1">
                                                <button class="nav-btn danger" @click="modelBackgroundShow = true, budgetDeleteModelShow = true, selectedBudget = '{{budget.id}}', selectedBudgetName = '{{ budget.name }}'">
                                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M18 6V16.2C18 17.8802 18 18.7202 17.673 19.362C17.3854 19.9265 16.9265 20.3854 16.362 20.673C15.7202 21 14.8802 21 13.2 21H10.8C9.11984 21 8.27976 21 7.63803 20.673C7.07354 20.3854 6.6146 19.9265 6.32698 19.362C6 18.7202 6 17.8802 6 16.2V6M14 10V17M10 10V17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    </svg>
                                                    מחיקה
                                                </button>
                                            </div>
                                        </div> 
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="border-dashed border-2 border-gray-200 flex flex-col items-center justify-center rounded-xl p-6 gap-4 text-center mt-2 mx-4">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-400 size-24">
                                    <path d="M21 20L20.5528 20.8944C20.8628 21.0494 21.2309 21.0329 21.5257 20.8507C21.8205 20.6684 22 20.3466 22 20H21ZM16.8052 18.0193L16.9438 17.029L16.8052 18.0193ZM17.6757 18.3378L17.2285 19.2323L17.6757 18.3378ZM17.1656 18.1044L16.8467 19.0522L17.1656 18.1044ZM3.21799 16.908L4.10899 16.454L3.21799 16.908ZM4.09202 17.782L4.54601 16.891L4.09202 17.782ZM19.908 4.21799L19.454 5.10899L19.908 4.21799ZM20.782 5.09202L19.891 5.54601L20.782 5.09202ZM4.09202 4.21799L4.54601 5.10899L4.09202 4.21799ZM3.21799 5.09202L4.10899 5.54601L3.21799 5.09202ZM11.2602 11.0429C10.8697 11.4334 10.8697 12.0666 11.2602 12.4571C11.6507 12.8476 12.2839 12.8476 12.6744 12.4571L11.2602 11.0429ZM9.06184 8.50074C8.92417 9.03559 9.24616 9.58078 9.78101 9.71844C10.3159 9.8561 10.861 9.53411 10.9987 8.99926L9.06184 8.50074ZM11.9668 13.75C11.4145 13.75 10.9668 14.1977 10.9668 14.75C10.9668 15.3023 11.4145 15.75 11.9668 15.75V13.75ZM11.9768 15.75C12.5291 15.75 12.9768 15.3023 12.9768 14.75C12.9768 14.1977 12.5291 13.75 11.9768 13.75V15.75ZM6.2 5H17.8V3H6.2V5ZM4 14.8V7.2H2V14.8H4ZM16.2446 17H6.2V19H16.2446V17ZM21.4472 19.1056L18.1229 17.4434L17.2285 19.2323L20.5528 20.8944L21.4472 19.1056ZM16.2446 19C16.553 19 16.6133 19.0022 16.6665 19.0097L16.9438 17.029C16.7211 16.9978 16.4996 17 16.2446 17V19ZM18.1229 17.4434C17.8948 17.3294 17.6977 17.2283 17.4845 17.1566L16.8467 19.0522C16.8977 19.0693 16.9526 19.0943 17.2285 19.2323L18.1229 17.4434ZM16.6665 19.0097C16.7278 19.0182 16.7881 19.0325 16.8467 19.0522L17.4845 17.1566C17.3086 17.0974 17.1276 17.0547 16.9438 17.029L16.6665 19.0097ZM2 14.8C2 15.3436 1.99922 15.8114 2.03057 16.195C2.06287 16.5904 2.13419 16.9836 2.32698 17.362L4.10899 16.454C4.0838 16.4045 4.04612 16.3038 4.02393 16.0322C4.00078 15.7488 4 15.3766 4 14.8H2ZM6.2 17C5.62345 17 5.25117 16.9992 4.96784 16.9761C4.69617 16.9539 4.59545 16.9162 4.54601 16.891L3.63803 18.673C4.01641 18.8658 4.40963 18.9371 4.80497 18.9694C5.18864 19.0008 5.65645 19 6.2 19V17ZM2.32698 17.362C2.6146 17.9265 3.07354 18.3854 3.63803 18.673L4.54601 16.891C4.35785 16.7951 4.20487 16.6422 4.10899 16.454L2.32698 17.362ZM17.8 5C18.3766 5 18.7488 5.00078 19.0322 5.02393C19.3038 5.04612 19.4045 5.0838 19.454 5.10899L20.362 3.32698C19.9836 3.13419 19.5904 3.06287 19.195 3.03057C18.8114 2.99922 18.3436 3 17.8 3V5ZM22 7.2C22 6.65645 22.0008 6.18864 21.9694 5.80497C21.9371 5.40963 21.8658 5.01641 21.673 4.63803L19.891 5.54601C19.9162 5.59545 19.9539 5.69617 19.9761 5.96784C19.9992 6.25117 20 6.62345 20 7.2H22ZM19.454 5.10899C19.6422 5.20487 19.7951 5.35785 19.891 5.54601L21.673 4.63803C21.3854 4.07354 20.9265 3.6146 20.362 3.32698L19.454 5.10899ZM6.2 3C5.65645 3 5.18864 2.99922 4.80497 3.03057C4.40963 3.06287 4.01641 3.13419 3.63803 3.32698L4.54601 5.10899C4.59545 5.0838 4.69617 5.04612 4.96784 5.02393C5.25117 5.00078 5.62345 5 6.2 5V3ZM4 7.2C4 6.62345 4.00078 6.25117 4.02393 5.96784C4.04612 5.69617 4.0838 5.59545 4.10899 5.54601L2.32698 4.63803C2.13419 5.01641 2.06287 5.40963 2.03057 5.80497C1.99922 6.18864 2 6.65645 2 7.2H4ZM3.63803 3.32698C3.07354 3.6146 2.6146 4.07354 2.32698 4.63803L4.10899 5.54601C4.20487 5.35785 4.35785 5.20487 4.54601 5.10899L3.63803 3.32698ZM12.9673 9.25C12.9673 9.42317 12.9218 9.55527 12.6478 9.81968C12.4941 9.96803 12.3131 10.1153 12.0622 10.324C11.8238 10.5223 11.5443 10.7587 11.2602 11.0429L12.6744 12.4571C12.8902 12.2413 13.1107 12.0533 13.3412 11.8616C13.5589 11.6805 13.8154 11.4723 14.0367 11.2587C14.5128 10.7993 14.9673 10.1814 14.9673 9.25H12.9673ZM11.9673 8.25C12.5195 8.25 12.9673 8.69772 12.9673 9.25H14.9673C14.9673 7.59315 13.6241 6.25 11.9673 6.25V8.25ZM10.9987 8.99926C11.1098 8.56774 11.5027 8.25 11.9673 8.25V6.25C10.568 6.25 9.39481 7.20704 9.06184 8.50074L10.9987 8.99926ZM11.9668 15.75H11.9768V13.75H11.9668V15.75ZM20 7.2V20H22V7.2H20Z" fill="currentColor"/>
                                </svg>
                                <div class="flex flex-col gap-2">
                                    <h3 class="text-xl font-semibold">לא קיים תקציב עבור הפרויקט הזה עדיין</h3>
                                </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            <!-- Payments Tab Content -->
            <div x-show="selectTab == 'payments'">
                <div class="border-b border-gray-200 flex items-center justify-between px-4 gap-4">
                    <div class="pb-4 w-2/4">
                        <h2 class="text-xl font-semibold my-2">תשלומים</h2>
                    </div>
                    <div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
    <!-- Details Section -->
    <div class="border-r border-gray-200 px-6 py-8 h-full w-1/4" x-data="{showContact : true , showAdditional : true, showALinks: true}">
        <div class="flex items-center justify-between">
            <h3 class="text-base font-semibold mb-4">פרטי פרויקט</h3>
            <button class="btn-normal transition-all duration-300" @click="showContact=!showContact">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" x-transition :class="showContact ? 'transition-all duration-150' : 'transition-all duration-360 rotate-x-180' ">
                    <path d="M6 15L12 9L18 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        
        <div class="grid grid-cols-3 px-2 gap-2 items-center" x-show="showContact" x-collapse.duration.500ms>
            <p class="text-gray-500">שם לקוח</p>
            <a class="col-span-2 btn-ghost w-fit" href="{% url 'customer-detail' project.customer.id %}">
                <img src="{% if project.customer.logo %}{{ project.customer.logo.url }}{% else %}{% static 'images/default-avater.png' %}{% endif %}" alt="Customer Logo" class="squircle w-6 h-6">
                {{project.customer.name}}
            </a>
            <p class="text-gray-500">משהו נוסף</p>
            <p class="flex items-center gap-1 [&>svg]:size-4 col-span-2">{{customer.legal_id}}</p>
            <p class="text-gray-500">סך הכנסות</p>
            <p class="flex items-center gap-1 [&>svg]:size-4 col-span-2">₪{{customer.total_income|floatformat:"0"|intcomma:False}}</p>
            <p class="text-gray-500">הצעות מחיר פתוחות</p>
            <p class="flex items-center gap-1 [&>svg]:size-4 col-span-2">₪{{customer.open_quotes.value|floatformat:"0"|intcomma:False}}<span class="status-pill proccess">{{customer.open_quotes.count|floatformat:"0"|intcomma:False}}</span></p>
            <p class="text-gray-500">פרויקטים פתוחים</p>
            <p class="flex items-center gap-1 [&>svg]:size-4 col-span-2">₪{{customer.open_projects.value|floatformat:"0"|intcomma:False}}<span class="status-pill proccess">{{customer.open_projects.count|floatformat:"0"|intcomma:False}}</span></p>
        </div>
        <hr class="text-gray-200 font-bold my-4">
        <div class="flex items-center justify-between">
            <h3 class="text-base font-semibold mb-4">פרטי תקציב</h3>
            <button class="btn-normal transition-all duration-300" @click="showAdditional=!showAdditional">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" x-transition :class="showAdditional ? 'transition-all duration-150' : 'transition-all duration-360 rotate-x-180' ">
                    <path d="M6 15L12 9L18 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="grid grid-cols-3 px-4 gap-2 items-center" x-show="showAdditional" x-collapse.duration.500ms>
            <p class="text-gray-500">שירות</p>
            <p class="col-span-2">{{project.service.name}}</p>
            <p class="text-gray-500">סוג תקציב</p>
            <span class="col-span-2 rounded-lg text-xs bg-gray-200 px-2 py-1 w-fit">{{project.service.get_budget_type_display}}</span>
            <p class="text-gray-500">תקציב</p>
            <p class="flex items-center gap-1 [&>svg]:size-4 col-span-2">{% if project.service.budget_type == 'fix' %}₪{{ project.budget.amount|floatformat:"0"|intcomma:False }}{% else %}{{ project.budget.hours|floatformat:"0"|intcomma:False }} שעות{% endif %}</p>
            <p class="text-gray-500">תאריך יצירה</p>
            <p class="col-span-2">{{project.created_at}}</p>
            <p class="text-gray-500">תאריך עדכון אחרון</p>
            <p class="col-span-2">{{project.updated_at}}</p>
        </div>
        <hr class="text-gray-200 font-bold my-4">
        <div class="flex items-center justify-between">
            <h3 class="text-base font-semibold mb-4">לינקים שימושיים</h3>
            <button class="btn-normal transition-all duration-300" @click="showALinks=!showALinks">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" x-transition :class="showALinks ? 'transition-all duration-150' : 'transition-all duration-360 rotate-x-180' ">
                    <path d="M6 15L12 9L18 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="grid grid-cols-3 px-4 gap-2 items-center" x-show="showALinks" x-collapse.duration.500ms>
            <p class="text-gray-500">תקייה בדרייב</p>
            {% if project.folder_id %}
            <a class="col-span-2 hover:bg-gray-200 w-fit p-1 rounded-lg cursor-pointer" href="{{ project.get_drive_folder_link }}" target="_blank">
                <svg class="size-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 8.2C3 7.07989 3 6.51984 3.21799 6.09202C3.40973 5.71569 3.71569 5.40973 4.09202 5.21799C4.51984 5 5.0799 5 6.2 5H9.67452C10.1637 5 10.4083 5 10.6385 5.05526C10.8425 5.10425 11.0376 5.18506 11.2166 5.29472C11.4184 5.4184 11.5914 5.59135 11.9373 5.93726L12.0627 6.06274C12.4086 6.40865 12.5816 6.5816 12.7834 6.70528C12.9624 6.81494 13.1575 6.89575 13.3615 6.94474C13.5917 7 13.8363 7 14.3255 7H17.8C18.9201 7 19.4802 7 19.908 7.21799C20.2843 7.40973 20.5903 7.71569 20.782 8.09202C21 8.51984 21 9.0799 21 10.2V15.8C21 16.9201 21 17.4802 20.782 17.908C20.5903 18.2843 20.2843 18.5903 19.908 18.782C19.4802 19 18.9201 19 17.8 19H6.2C5.07989 19 4.51984 19 4.09202 18.782C3.71569 18.5903 3.40973 18.2843 3.21799 17.908C3 17.4802 3 16.9201 3 15.8V8.2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </a>
            {% else %}
            <p class="col-span-2">
                <svg class="size-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9.86504 15.1076L14.1233 10.8806M12.0627 6.06274L11.9373 5.93726C11.5914 5.59135 11.4184 5.4184 11.2166 5.29472C11.0376 5.18506 10.8425 5.10425 10.6385 5.05526C10.4083 5 10.1637 5 9.67452 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V15.8C3 16.9201 3 17.4802 3.21799 17.908C3.40973 18.2843 3.71569 18.5903 4.09202 18.782C4.51984 19 5.07989 19 6.2 19H17.8C18.9201 19 19.4802 19 19.908 18.782C20.2843 18.5903 20.5903 18.2843 20.782 17.908C21 17.4802 21 16.9201 21 15.8V10.2C21 9.0799 21 8.51984 20.782 8.09202C20.5903 7.71569 20.2843 7.40973 19.908 7.21799C19.4802 7 18.9201 7 17.8 7H14.3255C13.8363 7 13.5917 7 13.3615 6.94474C13.1575 6.89575 12.9624 6.81494 12.7834 6.70528C12.5816 6.5816 12.4086 6.40865 12.0627 6.06274ZM15 13C15 14.6569 13.6569 16 12 16C10.3431 16 9 14.6569 9 13C9 11.3431 10.3431 10 12 10C13.6569 10 15 11.3431 15 13Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </p>
            {% endif %}
            <p class="text-gray-500">אתר</p>
            {% if project.customer.website %}
            <a class="col-span-2 text-link" href="{{ project.customer.website }}" target="_blank">לינק לאתר</a>
            {% else %}
            <p class="col-span-2">-</p>
            {% endif %}
        </div>
    </div>
    <!-- Models -->
    <div class="fixed top-0 right-0 h-screen w-screen bg-black/30 flex items-start justify-center pt-60" x-show="modelBackgroundShow" x-cloak>
        <!-- Delete Confirmation Model For Single Record-->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="singleDeleteModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, singleDeleteModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3">מחיקת פרויקט</h1>
                <span class="flex gap-2 items-center">
                    <p class="text-gray-500">אתה עומד למחוק את</p>
                    <p class="text-gray-900 text-semibold" x-text="selectedProjectName"></p>
                </span>
                <p class="text-gray-500">פעולה זו אינה ניתנת לשחזור</p>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" :action="'{% url 'project-delete' pk=999999 %}'.replace('999999', selectedProject)">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-list" class="hidden">
                    <button class="btn-action danger high" type="submit">
                     מחיקה
                    </button>
                </form>
                
                <button class="btn-action" @click="modelBackgroundShow = false, singleDeleteModelShow = false">
                    ביטול
                </button>
            </div>
        </div>
        <!-- Delete Confirmation Model For Single Task-->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="taskDeleteModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, taskDeleteModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3">מחיקת משימה</h1>
                <span class="flex gap-2 items-center">
                    <p class="text-gray-500">אתה עומד למחוק את</p>
                    <p class="text-gray-900 text-semibold" x-text="selectedTaskName"></p>
                </span>
                <p class="text-gray-500">פעולה זו אינה ניתנת לשחזור</p>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" :action="'{% url 'task-delete' pk=999999 %}'.replace('999999', selectedTask)">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-list" class="hidden">
                    <button class="btn-action danger high" type="submit">
                     מחיקה
                    </button>
                </form>
                
                <button class="btn-action" @click="modelBackgroundShow = false, taskDeleteModelShow = false">
                    ביטול
                </button>
            </div>
        </div>
        <!-- Delete Confirmation Model For Single Timesheet-->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="timesheetDeleteModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, timesheetDeleteModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3">מחיקת דיווח שעות</h1>
                <span class="flex gap-2 items-center">
                    <p class="text-gray-500">אתה עומד למחוק</p>
                    <p class="text-gray-900 text-semibold" x-text="selectedTimesheetName"></p>
                </span>
                <p class="text-gray-500">פעולה זו אינה ניתנת לשחזור</p>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" :action="'{% url 'timesheet-delete' pk=999999 %}'.replace('999999', selectedTimesheet)">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-list" class="hidden">
                    <button class="btn-action danger high" type="submit">
                     מחיקה
                    </button>
                </form>
                
                <button class="btn-action" @click="modelBackgroundShow = false, timesheetDeleteModelShow = false">
                    ביטול
                </button>
            </div>
        </div>
        <!-- Delete Confirmation Model For Single Budget-->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="budgetDeleteModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, budgetDeleteModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3">מחיקת תקציב</h1>
                <span class="flex gap-2 items-center">
                    <p class="text-gray-500">אתה עומד למחוק</p>
                    <p class="text-gray-900 text-semibold" x-text="selectedBudgetName"></p>
                </span>
                <p class="text-gray-500">פעולה זו אינה ניתנת לשחזור</p>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" :action="'{% url 'budget-delete' pk=999999 %}'.replace('999999', selectedBudget)">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-list" class="hidden">
                    <button class="btn-action danger high" type="submit">
                     מחיקה
                    </button>
                </form>
                
                <button class="btn-action" @click="modelBackgroundShow = false, budgetDeleteModelShow = false">
                    ביטול
                </button>
            </div>
        </div>
        <!-- Task Form Model -->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="taskModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, taskModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3" x-text="taskModelTitle"></h1>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" :action="'{% url 'task-create-update' pk=999999 %}'.replace('999999', selectedTask)" class="w-full">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-detail" class="hidden">
                    <input type="text" name="project" value="{{project.id}}" class="hidden">
                    <div class="flex flex-col gap-1">
                        <label for="taskTitle" class="text-gray-600">כותרת</label>
                        <input type="text" id="taskTitle" name="taskTitle" :value="selectedTaskTitle" class="input-field">
                        <label for="taskUrgency" class="text-gray-600">דחיפות</label>
                        <fieldset >
                            <div class="flex items-center gap-2">
                                <div :class="selectedTaskUrgency == 'low' ? 'bg-blue-50 border-blue-200' : 'border-white'" class="border p-2 rounded-lg">
                                    <input type="radio" id="lowUrgency" name="taskUrgency" value="low" checked class="hidden">
                                    <label for="lowUrgency" class="status-pill success" @click="selectedTaskUrgency = 'low'">נמוכה</label>
                                </div>
                                <div :class="selectedTaskUrgency == 'medium' ? 'bg-blue-50 border-blue-200' : 'border-white'" class="border p-2 rounded-lg">
                                    <input type="radio" id="mediumUrgency" name="taskUrgency" value="medium" class="hidden">
                                    <label for="mediumUrgency" class="status-pill alert" @click="selectedTaskUrgency = 'medium'">בינונית</label>
                                </div>
                                <div :class="selectedTaskUrgency == 'high' ? 'bg-blue-50 border-blue-200' : 'border-white'" class="border p-2 rounded-lg">
                                    <input type="radio" id="highUrgency" name="taskUrgency" value="high" class="hidden">
                                    <label for="highUrgency" class="status-pill danger" @click="selectedTaskUrgency = 'high'">גבוהה</label>
                                </div>
                                <div :class="selectedTaskUrgency == 'critical' ? 'bg-blue-50 border-blue-200' : 'border-white'" class="border p-2 rounded-lg">
                                    <input type="radio" id="criticalUrgency" name="taskUrgency" value="critical" class="hidden">
                                    <label for="criticalUrgency" class="status-pill proccess" @click="selectedTaskUrgency = 'critical'">קריטית</label>
                                </div>
                            </div>
                        </fieldset>
                        <label for="taskDescription" class="text-gray-600">תיאור</label>
                        <textarea id="taskDescription" name="taskDescription" :value="selectedTaskDescription" class="input-field" rows="3"></textarea>
                    </div>
                    <div class="flex items-center gap-2 justify-end mt-2">
                        <button class="btn-main" type="submit">
                             שמירה
                        </button>
                        <a class="btn-action" @click="modelBackgroundShow = false, taskModelShow = false">
                             ביטול
                        </a>
                    </div>
                </form>
            </div>
        </div>
        <!-- Budget Form Model -->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="budgetModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, budgetModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3" x-text="budgetModelTitle"></h1>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" 
                :action="budgetModelTitle == 'הוספת תקציב' ? '{% url 'budget-add' pk=999999 %}'.replace('999999', selectedBudget) : '{% url 'budget-create-update' pk=999999 %}'.replace('999999', selectedBudget)" 
                class="w-full">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-detail" class="hidden">
                    <input type="text" name="project" value="{{project.id}}" class="hidden">
                    <div class="flex flex-col gap-1">
                        <label for="taskTitle" class="text-gray-600" :class="budgetModelTitle == 'הוספת תקציב' ? 'hidden' : '' ">כותרת</label>
                        <input type="text" id="budgetName" name="budgetName" :value="selectedBudgetName" class="input-field" :class="budgetModelTitle == 'הוספת תקציב' ? 'hidden' : '' ">
                        <label for="taskUrgency" class="text-gray-600">כמות</label>
                        <input type="decimal" id="budgetQty" name="budgetQty" :value="selectedBudgetQty" class="input-field">
                        <label for="taskDescription" class="text-gray-600" :class="budgetModelTitle == 'הוספת תקציב' ? 'hidden' : '' ">מחיר</label>
                        <input type="decimal" id="budgetPrice" name="budgetPrice" :value="selectedBudgetPrice" class="input-field" :class="budgetModelTitle == 'הוספת תקציב' ? 'hidden' : '' ">
                    </div>
                    <div class="flex items-center gap-2 justify-end mt-2">
                        <button class="btn-main" type="submit">
                             שמירה
                        </button>
                        <a class="btn-action" @click="modelBackgroundShow = false, budgetModelShow = false">
                             ביטול
                        </a>
                    </div>
                </form>
            </div>
        </div>
        <!-- Timesheet Form Model -->
        <div class="relative bg-white border border-gray-200 shadow rounded-lg px-4 py-4 min-w-1/4 min-h-1/5 flex flex-col" x-show="timesheetModelShow" x-cloak>
            <button class="absolute top-2 left-2 [&>svg]:size-6 p-0.5 rounded hover:bg-gray-50 cursor-pointer" @click="modelBackgroundShow = false, timesheetModelShow = false">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="flex-1">
                <h1 class="text-xl font-semibold my-3">טופס דיווח שעות</h1>
            </div>
            <div class="flex items-center justify-end gap-2">
                <form method="post" :action="'{% url 'timesheet-create-update' pk=999999 %}'.replace('999999', selectedTask)" class="w-full">
                    {% csrf_token %}
                    <input type="text" name="fallback" value="project-detail" class="hidden">
                    <input type="text" name="timesheet" :value="selectedTimesheet" class="hidden">
                    <div class="flex flex-col gap-1">
                        <label for="taskTitle" class="text-gray-600">תאריך</label>
                        <input type="date" id="timesheetDate" name="timesheetDate" class="input-field" :value="selectedTimesheetDate">
                        <label for="timesheetHours" class="text-gray-600">שעות</label>
                        <input type="decimal" class="input-field" id="timesheetHours" name="timesheetHours" :value="selectedTimesheetHours">
                        <label for="timesheetDescription" class="text-gray-600">תיאור</label>
                        <textarea id="timesheetDescription" name="timesheetDescription" class="input-field" rows="3" :value="selectedTimesheetDescription"></textarea>
                    </div>
                    <div class="flex items-center gap-2 justify-end mt-2">
                        <button class="btn-main" type="submit">
                             שמירה
                        </button>
                        <a class="btn-action" @click="modelBackgroundShow = false, timesheetModelShow = false">
                             ביטול
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function setSection() {
        return {
            selectTab : "tasks",

            init() {
                const urlParams = new URLSearchParams(window.location.search);
                const section = urlParams.get('section');
                if (section) {
                    this.selectTab = section;
                    // clear the query parameter from URL bar after reading
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        }
    }
</script>

{% endblock content %}